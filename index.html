<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Market Prices â€¢ EverythingPallets</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Header -->
  <header class="sticky-header">
    <div class="market-logo-container">
      <img src="assets/Logo.png" alt="EverythingPallets Logo" class="market-logo" />
    </div>
    <h1 class="page-title">Market Prices</h1>
    <p class="page-subtitle">Live Pellet & Briquette Price Intelligence by Location</p>
  </header>

  <!-- Nav -->
  <nav class="sticky-nav">
    <a href="index.html">Home</a>
    <a href="market.html" aria-current="page">Market Prices</a>
    <a href="news.html">News</a>
    <a href="contact.html">Contact</a>
  </nav>

  <main>
    <!-- Location + Price Tables -->
    <section class="section">
      <div class="section-header">
        <h2>Pellet Prices (â‚¹/ton)</h2>
        <span id="marketLastUpdated" class="badge">Last updated: â€”</span>
      </div>
      <div class="filters">
        <label for="locationSelect"><strong>Location:</strong></label>
        <select id="locationSelect" class="styled-dropdown"></select>
      </div>
      <table id="materialTable" class="hover-table"></table>
    </section>

    <section class="section">
      <div class="section-header">
        <h2>Briquette Prices (â‚¹/ton)</h2>
      </div>
      <table id="briquetteTable" class="hover-table"></table>
    </section>

    <!-- Trend Charts -->
    <section class="section graph-box">
      <div class="chart-header">
        <label for="materialSelect"><strong>Select Pellet Type:</strong></label>
        <select id="materialSelect" class="styled-dropdown"></select>
      </div>
      <h3 id="chartTitle">Pellet Price Trend</h3>
      <canvas id="priceChart" width="400" height="220"></canvas>
      <p class="timestamp">Last updated: <span id="pelletTimestamp">â€”</span></p>
    </section>

    <section class="section graph-box">
      <div class="chart-header">
        <label for="briquetteSelect"><strong>Select Briquette Type:</strong></label>
        <select id="briquetteSelect" class="styled-dropdown"></select>
      </div>
      <h3 id="briquetteChartTitle">Briquette Price Trend</h3>
      <canvas id="briquetteChart" width="400" height="220"></canvas>
      <p class="timestamp">Last updated: <span id="briquetteTimestamp">â€”</span></p>
    </section>

    <!-- ============ NEW FEATURES START ============ -->

    <!-- 1) Freight Calculator -->
    <section class="section card" id="freight">
      <div class="section-header">
        <h2>Freight Calculator</h2>
        <p class="muted">Get delivered cost per ton in seconds.</p>
      </div>

      <form id="freightForm" class="grid grid-2">
        <div class="form-field">
          <label for="fromPlace">Pickup (City/State)</label>
          <input id="fromPlace" name="fromPlace" type="text" placeholder="e.g., Ludhiana, Punjab" />
        </div>

        <div class="form-field">
          <label for="toPlace">Delivery (City/State)</label>
          <input id="toPlace" name="toPlace" type="text" placeholder="e.g., Bhiwadi, Rajasthan" />
        </div>

        <div class="form-field">
          <label for="distanceKm">Distance (km)</label>
          <input id="distanceKm" name="distanceKm" type="number" min="1" placeholder="e.g., 320" required />
        </div>

        <div class="form-field">
          <label for="quantityTons">Quantity (tons)</label>
          <input id="quantityTons" name="quantityTons" type="number" min="1" placeholder="e.g., 28" required />
        </div>

        <div class="form-field">
          <label for="truckCapacity">Truck Capacity (tons)</label>
          <select id="truckCapacity" name="truckCapacity">
            <option>10</option>
            <option>16</option>
            <option selected>20</option>
            <option>28</option>
          </select>
        </div>

        <div class="form-field">
          <label for="ratePerKm">Freight Rate (â‚¹/km)</label>
          <input id="ratePerKm" name="ratePerKm" type="number" min="1" value="30" />
        </div>

        <div class="form-field">
          <label for="baseMaterialPrice">Material Price (â‚¹/ton)</label>
          <input id="baseMaterialPrice" name="baseMaterialPrice" type="number" min="0" placeholder="Optional: e.g., 7600" />
        </div>

        <div class="form-actions">
          <button type="submit" class="btn primary">Calculate Freight</button>
          <button type="button" id="clearFreight" class="btn ghost">Clear</button>
        </div>
      </form>

      <div id="freightResult" class="result-grid">
        <div class="result-box">
          <span class="result-label">Trips Required</span>
          <span id="rTrips" class="result-value">â€”</span>
        </div>
        <div class="result-box">
          <span class="result-label">Total Freight (â‚¹)</span>
          <span id="rTotalFreight" class="result-value">â€”</span>
        </div>
        <div class="result-box">
          <span class="result-label">Freight / ton (â‚¹)</span>
          <span id="rFreightPerTon" class="result-value">â€”</span>
        </div>
        <div class="result-box">
          <span class="result-label">Landed Cost / ton (â‚¹)</span>
          <span id="rLandedPerTon" class="result-value accent">â€”</span>
        </div>
      </div>
      <p class="tiny muted">Note: Estimates assume direct route and standard market conditions. Adjust rate/km for accuracy.</p>
    </section>

    <!-- 2) Fuel Comparison (our materials only) -->
    <section class="section card" id="fuel-compare">
      <div class="section-header">
        <h2>Fuel Comparison (Cost per Energy)</h2>
        <p class="muted">Compare â‚¹ per million kcal for materials we trade. Lower is better.</p>
      </div>

      <div class="table-scroll">
        <table id="fuelCompareTable" class="hover-table compact">
          <thead>
            <tr>
              <th>Fuel</th>
              <th>kcal/kg</th>
              <th>Price (â‚¹/ton)</th>
              <th>â‚¹ / MMkcal</th>
              <th>Best</th>
            </tr>
          </thead>
          <tbody id="fuelCompareBody">
            <!-- JS will render rows -->
          </tbody>
        </table>
      </div>

      <div class="form-actions right">
        <button id="recalcFuel" class="btn">Recalculate</button>
        <button id="resetFuel" class="btn ghost">Reset</button>
      </div>
    </section>

    <!-- 3) Submit your price + Call for best rates -->
    <section class="section card" id="leads">
      <div class="grid grid-2 stack-sm">
        <!-- Submit Price -->
        <div class="panel">
          <h3>Submit Your Own Price</h3>
          <p class="muted">Help improve the index. Share what you paid or were quoted today.</p>
          <form id="submitPriceForm" class="grid">
            <div class="form-field">
              <label for="spMaterial">Material</label>
              <select id="spMaterial">
                <option>Wood Pellet 8mm</option>
                <option>Mustard Husk Briquette</option>
                <option>Rice Husk Pellet</option>
                <option>Bagasse Briquette</option>
              </select>
            </div>
            <div class="form-field">
              <label for="spLocation">Location (City/State)</label>
              <input id="spLocation" type="text" placeholder="e.g., Sonipat, Haryana" />
            </div>
            <div class="form-field">
              <label for="spPrice">Price (â‚¹/ton)</label>
              <input id="spPrice" type="number" min="0" placeholder="e.g., 7600" />
            </div>
            <div class="form-field">
              <label for="spQty">Quantity (tons)</label>
              <input id="spQty" type="number" min="1" placeholder="Optional" />
            </div>
            <div class="form-actions">
              <button class="btn primary" type="submit">Submit Price</button>
              <span id="spStatus" class="tiny muted"></span>
            </div>
          </form>
        </div>

        <!-- Call for Best Rates -->
        <div class="panel highlight">
          <h3>Call for Best Rates & Topâ€‘Quality Biofuel</h3>
          <p class="muted">Speak to Peltra sourcingâ€”fast quotes, verified suppliers, consistent quality.</p>
          <div class="cta-buttons">
            <a class="btn primary big" href="tel:+919999999999">ðŸ“ž Call Now</a>
            <a id="waBestRates" class="btn whats big" target="_blank" rel="noopener">
              ðŸ’¬ WhatsApp Us
            </a>
          </div>
          <p class="tiny muted">Tip: Share your location & quantity to get a faster quote.</p>
        </div>
      </div>
    </section>

    <!-- ============ NEW FEATURES END ============ -->
  </main>

  <footer class="footer">
    <p>&copy; 2025 EverythingPallets. Made with sustainability in mind.</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>